<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3: Color change bar</title>
        <script type="text/javascript" src="http://d3js.org/d3.v3.js"></script>
        <style type="text/css">
            
            rect:hover {
                fill: purple;
            }

            svg text {
                pointer-events: none;
            }

        </style>
    </head>
    <body>
        <script type="text/javascript">
     
        var dataset = [ 15, 10, 21, 12, 22, 5, 7, 22, 10];
       

        var w = 500;
        var h = 200;
        var barPadding = 1;
        var svg = d3.select("body")
            .append("svg");
            svg.attr("width", w)    
            svg.attr("height", h);

        svg.selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr("x", function(d,i) {
                return i * (w / dataset.length);
            })
            .attr("y", function(d) {
                return h - (d * 4);
            })
            .attr("width", w / dataset.length - barPadding)
            .attr("height", function(d) {
                return d * 4;
            })
            .attr("fill", function(d) { 
                return "orange" +  (d * 10) + ")";
            })
            .on("click", function(d){
                console.log(d);
            })
            .on("mouseout", function(d){
                d3.select(this).attr("fill","orange")
            })
            ;

            svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d) {
                return d;
            })
            .attr("x", function(d,i) {
                return i * (w/dataset.length) + (w / dataset.length - barPadding) / 2;
            })
            .attr("y", function(d) {
                return h - (d * 4) + 14;
            })
            .attr("font-family","sans-serif")
            .attr("font-size", "12px")
            .attr("fill", "white")
            .attr("text-anchor", "middle")
            ;

        </script>
    </body>
</html>